<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Follow Mouse 2</title>
    <script src=" ../../Tools/ship.js"></script>
    <script src=" ../../Tools/util.js"></script>
    <script src=" ../../Tools/keycode.js"></script>

    <script src=" ./rule.js"></script>

    <style>
        /*canvas {
            background: red;
        }*/
    </style>
    <script>
        window.onload = function() {
            var canvas = document.getElementById('canvas'),
                context = canvas.getContext('2d'),
                rule = new Rule(canvas.width, canvas.height, 10),
                x = 0,
                vx = 0,
                friction = 1,
                ax = 0;
            window.addEventListener('keydown', function(event) {
                switch (event.keyCode) {
                    case keycode.LEFT:
                        vx = -3;
                        break;
                    case keycode.RIGHT:
                        vx = 3;

                        break;

                }
            }, false);
            window.addEventListener('keyup', function() {
                friction = 0.98;
                ax = 0;
                // vx = 0;
            }, false);
            (function drawFrame() {
                window.requestAnimationFrame(drawFrame, canvas);
                context.clearRect(0, 0, canvas.width, canvas.height);

                vx *= friction;
                x += vx;
                rule.draw(context, x);
            }());
        };
    </script>
</head>

<body>
    <canvas id="canvas" width="800" height="400"></canvas>
</body>

</html>
